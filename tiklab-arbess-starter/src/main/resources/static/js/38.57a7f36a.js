(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{1404:function(e,t,r){"use strict";r.r(t);r(593);var n=r(595),a=(r(594),r(596)),l=(r(179),r(102)),u=(r(400),r(276)),i=(r(275),r(177)),o=(r(280),r(180)),c=r.n(o),m=(r(281),r(181)),s=r.n(m),f=(r(157),r(48)),b=(r(155),r(44)),d=r(0),N=r.n(d),p=r(353),_=r(354),y=r(362),h=r(39),v=r(646),g=r(116),E=r(182),O=r(663),j=r(283),w=r(670),P=r(727),S=(r(279),r(130)),I=(r(274),r(156)),k=(r(277),r(73)),C=r(184),x=r(813),T=r(76),H=r(115),W=r(944),A=r(9);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var U="/Users/gaomengyuan/tiklab/tiklab-arbess-ui/src/pipeline/history/components/HistoryScreen.js";function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=L(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,u,i=[],o=!0,c=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=l.call(r)).done)&&(i.push(n.value),i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{if(!o&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(c)throw a}}return i}}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return Y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(e,t):void 0}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var B=Object(h.observer)((function(e){var t=e.match,r=e.pageParam,n=e.requestParam,a=e.setRequestParam,l=e.route,u=e.historyCount,o=e.activeTab,c=e.setActiveTab,m=T.a.findUserPipelinePage,s=T.a.findUserPage,f=T.a.findDmUserPage,b=(Object(A.getUser)(),z(Object(d.useState)([]),2)),p=b[0],_=b[1],y=z(Object(d.useState)(1),2),h=y[0],g=y[1],E=z(Object(d.useState)({}),2),O=E[0],j=E[1],w=z(Object(d.useState)([]),2),P=w[0],L=w[1],D=z(Object(d.useState)(1),2),R=D[0],V=D[1],Y=z(Object(d.useState)({}),2),B=Y[0],q=Y[1],X=z(Object(d.useState)(!1),2),$=X[0],J=X[1];Object(d.useEffect)((function(){"/history"===l.path&&K()}),[h]),Object(d.useEffect)((function(){"/history"===l.path&&G(),"/pipeline/:id/history"===l.path&&Q()}),[R]);var K=function(){m({pageParam:{pageSize:10,currentPage:h}}).then((function(e){0===e.code&&(j({totalRecord:e.data.totalRecord,totalPage:e.data.totalPage}),_(1===h?e.data.dataList:[].concat(F(p),F(e.data.dataList))))}))},G=function(){s({pageParam:{pageSize:10,currentPage:R}}).then((function(e){0===e.code&&(q({totalRecord:e.data.totalRecord,totalPage:e.data.totalPage}),L(1===R?e.data.dataList:[].concat(F(P),F(e.data.dataList))))}))},Q=function(){f({pageParam:{pageSize:10,currentPage:R},domainId:t.params.id}).then((function(e){0===e.code&&(q({totalRecord:e.data.totalRecord,totalPage:e.data.totalPage}),L(1===R?e.data.dataList:[].concat(F(P),F(e.data.dataList))))}))},Z=function(e){e.persist();var t=e.target;t.scrollTop+t.offsetHeight===t.scrollHeight&&R<B.totalPage&&V(R+1)},ee=Object(v.c)((function(e){a((function(t){return M(M({},t),{},{number:e.target.value,pageParam:r})}))}),500),te=z(k.default.useForm(),1)[0];return N.a.createElement("div",{className:"history-screens",__source:{fileName:U,lineNumber:210,columnNumber:9}},N.a.createElement(x.a,{type:o,tabLis:[{id:"all",title:N.a.createElement(N.a.Fragment,null,"所有",N.a.createElement("span",{className:"count-number",__source:{fileName:U,lineNumber:218,columnNumber:33}},Object(v.e)((null==u?void 0:u.allNumber)||0)))},{id:"userId",title:N.a.createElement(N.a.Fragment,null,"我运行的",N.a.createElement("span",{className:"count-number",__source:{fileName:U,lineNumber:228,columnNumber:33}},Object(v.e)((null==u?void 0:u.execNumber)||0)))},{id:"state",title:N.a.createElement(N.a.Fragment,null,"运行中的",N.a.createElement("span",{className:"count-number",__source:{fileName:U,lineNumber:238,columnNumber:33}},Object(v.e)((null==u?void 0:u.runNumber)||0)))}],onClick:function(e){c(e.id),a((function(e){return M(M({},e),{},{pageParam:r})}))},__source:{fileName:U,lineNumber:211,columnNumber:13}}),N.a.createElement(i.default,{__source:{fileName:U,lineNumber:247,columnNumber:13}},N.a.createElement(C.a,{placeholder:"搜索名称",onPressEnter:ee,style:{width:180},__source:{fileName:U,lineNumber:248,columnNumber:17}}),N.a.createElement(S.default,{overlay:N.a.createElement("div",{className:"history-senior-screen-drop",__source:{fileName:U,lineNumber:255,columnNumber:25}},N.a.createElement(k.default,{form:te,layout:"vertical",onValuesChange:function(e){var t=M(M(M({},n),e),{},{pageParam:r});Object.keys(e).forEach((function(r){"all"===e[r]&&delete t[r]})),a(t)},__source:{fileName:U,lineNumber:256,columnNumber:29}},"/history"===l.path?N.a.createElement(N.a.Fragment,null,N.a.createElement(k.default.Item,{label:"流水线",name:"pipelineId",__source:{fileName:U,lineNumber:264,columnNumber:41}},N.a.createElement(I.default,{placeholder:"流水线",onPopupScroll:function(e){e.persist();var t=e.target;t.scrollTop+t.offsetHeight===t.scrollHeight&&h<O.totalPage&&g(h+1)},bordered:!1,getPopupContainer:function(e){return e.parentElement},__source:{fileName:U,lineNumber:265,columnNumber:45}},N.a.createElement(I.default.Option,{value:"all",key:"all",__source:{fileName:U,lineNumber:271,columnNumber:49}},"全部"),p&&p.map((function(e){return N.a.createElement(I.default.Option,{key:e.id,value:e.id,__source:{fileName:U,lineNumber:274,columnNumber:57}},e.name)})))),N.a.createElement(k.default.Item,{label:"执行人",name:"execUserId",__source:{fileName:U,lineNumber:279,columnNumber:41}},N.a.createElement(I.default,{placeholder:"执行人",onPopupScroll:Z,bordered:!1,getPopupContainer:function(e){return e.parentElement},__source:{fileName:U,lineNumber:280,columnNumber:45}},N.a.createElement(I.default.Option,{value:"all",key:"all",__source:{fileName:U,lineNumber:286,columnNumber:49}},"全部"),P&&P.map((function(e){return N.a.createElement(I.default.Option,{key:e.id,value:e.id,__source:{fileName:U,lineNumber:289,columnNumber:57}},e.nickname)}))))):N.a.createElement(k.default.Item,{label:"执行人",name:"execUserId",__source:{fileName:U,lineNumber:296,columnNumber:37}},N.a.createElement(I.default,{placeholder:"执行人",onPopupScroll:Z,bordered:!1,getPopupContainer:function(e){return e.parentElement},__source:{fileName:U,lineNumber:297,columnNumber:41}},N.a.createElement(I.default.Option,{value:"all",key:"all",__source:{fileName:U,lineNumber:303,columnNumber:45}},"全部"),P&&P.map((function(e){return N.a.createElement(I.default.Option,{key:e.id,value:e.user&&e.user.id,__source:{fileName:U,lineNumber:306,columnNumber:53}},e.user&&e.user.nickname)})))),N.a.createElement(k.default.Item,{label:"状态",name:"state",__source:{fileName:U,lineNumber:312,columnNumber:33}},N.a.createElement(I.default,{placeholder:"状态",bordered:!1,getPopupContainer:function(e){return e.parentElement},__source:{fileName:U,lineNumber:313,columnNumber:37}},N.a.createElement(I.default.Option,{value:"all",key:"all",__source:{fileName:U,lineNumber:314,columnNumber:41}},"全部"),N.a.createElement(I.default.Option,{value:"success",__source:{fileName:U,lineNumber:315,columnNumber:41}},"成功"),N.a.createElement(I.default.Option,{value:"error",__source:{fileName:U,lineNumber:316,columnNumber:41}},"失败"),N.a.createElement(I.default.Option,{value:"halt",__source:{fileName:U,lineNumber:317,columnNumber:41}},"终止"),N.a.createElement(I.default.Option,{value:"timeout",__source:{fileName:U,lineNumber:318,columnNumber:41}},"超时"))),N.a.createElement(k.default.Item,{label:"执行方式",name:"type",__source:{fileName:U,lineNumber:321,columnNumber:33}},N.a.createElement(I.default,{placeholder:"执行方式",bordered:!1,getPopupContainer:function(e){return e.parentElement},__source:{fileName:U,lineNumber:322,columnNumber:37}},N.a.createElement(I.default.Option,{value:"all",key:"all",__source:{fileName:U,lineNumber:323,columnNumber:41}},"全部"),N.a.createElement(I.default.Option,{value:1,__source:{fileName:U,lineNumber:324,columnNumber:41}},"手动"),N.a.createElement(I.default.Option,{value:2,__source:{fileName:U,lineNumber:325,columnNumber:41}},"定时"),N.a.createElement(I.default.Option,{value:3,__source:{fileName:U,lineNumber:326,columnNumber:41}},"回滚"),N.a.createElement(I.default.Option,{value:4,__source:{fileName:U,lineNumber:327,columnNumber:41}},"WebHook")))),N.a.createElement("div",{className:"screen-drop-button",__source:{fileName:U,lineNumber:331,columnNumber:29}},N.a.createElement(H.a,{isMar:!0,onClick:function(){return J(!1)},__source:{fileName:U,lineNumber:332,columnNumber:33}},"取消"),N.a.createElement(H.a,{isMar:!0,onClick:function(){te.resetFields(),a((function(e){return{pageParam:r,number:e.number}}))},__source:{fileName:U,lineNumber:335,columnNumber:33}},"重置"),N.a.createElement(H.a,{type:"primary",onClick:function(){return J(!1)},__source:{fileName:U,lineNumber:338,columnNumber:33}},"确定"))),trigger:["click"],visible:$,onVisibleChange:function(e){return J(e)},getPopupContainer:function(e){return e.parentElement},placement:"bottomRight",__source:{fileName:U,lineNumber:253,columnNumber:17}},N.a.createElement("div",{className:"history-senior-screen",__source:{fileName:U,lineNumber:350,columnNumber:21}},N.a.createElement("img",{src:W.a,width:22,height:22,__source:{fileName:U,lineNumber:351,columnNumber:25}})))))})),q=r(920),X=r(738),$=r(737),J=r.p+"images/pip_trigger.svg",K=r(649);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Q="/Users/gaomengyuan/tiklab/tiklab-arbess-ui/src/pipeline/history/components/History.js";function Z(){return(Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=G(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==G(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,u,i=[],o=!0,c=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=l.call(r)).done)&&(i.push(n.value),i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{if(!o&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(c)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ae(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.default=Object(h.observer)((function(e){var t=e.match,r=e.route,o=T.a.findOnePipeline,m=$.a.findUserInstance,h=$.a.findPipelineInstance,S=$.a.deleteInstance,I=$.a.execStart,k=$.a.execStop,C=$.a.rollBackStart,x=$.a.setHistoryList,H=$.a.findPipelineInstanceCount,W=$.a.page,L=$.a.historyList,U=Object(d.useRef)(null),D=Object(A.getUser)(),M="/history"===r.path,R=ne(Object(d.useState)(null),2),F=R[0],z=R[1],V=ne(Object(d.useState)(!1),2),Y=V[0],G=V[1],ee=ne(Object(d.useState)(!1),2),re=ee[0],ae=ee[1],le={pageSize:12,currentPage:1},ue=ne(Object(d.useState)({pageParam:le}),2),ie=ue[0],oe=ue[1],ce=ne(Object(d.useState)({}),2),me=ce[0],se=ce[1],fe=ne(Object(d.useState)("all"),2),be=fe[0],de=fe[1];Object(d.useEffect)((function(){return function(){x([]),clearInterval(U.current)}}),[]);Object(d.useEffect)((function(){G(!0),Ne(),H(te({pipelineId:t.params.id,userId:D.userId},ie)).then((function(e){0===e.code&&se(e.data)}))}),[ie,t.params.id]);var Ne=function(){var e=te({},ie);"userId"===be&&(e.execUserId=(null==ie?void 0:ie.execUserId)||D.userId),"state"===be&&(e.state=(null==ie?void 0:ie.state)||"run"),(M?m(e):h(te(te({},e),{},{pipelineId:t.params.id}))).then((function(e){if(0===e.code){if(!e.data||e.data.dataList.length<1)return;var t=e.data.dataList[0].runStatus;t!==K.H&&t!==K.L||pe()}})).finally((function(){return G(!1)}))},pe=function(){clearInterval(U.current),U.current=setInterval((function(){var e=te({},ie);"userId"===be&&(e.execUserId=(null==ie?void 0:ie.execUserId)||D.userId),"state"===be&&(e.state=(null==ie?void 0:ie.state)||"run"),(M?m(e):h(te(te({},e),{},{pipelineId:t.params.id}))).then((function(e){(!e.data||e.data.dataList.length<1)&&clearInterval(U.current);var t=e.data.dataList[0].runStatus;t!==K.H&&t!==K.L&&clearInterval(U.current)}))}),1e3)},_e=function(e){clearInterval(U.current),z(e),ae(!0)},ye=function(e){oe((function(t){return te(te({},t),{},{pageParam:{pageSize:12,currentPage:e}})}))},he=function(e){S(e.instanceId).then((function(e){if(0===e.code){var t=Object(v.d)(W.totalRecord,12,W.currentPage);ye(t)}}))},ve=Object(v.c)((function(e){G(!0);var t=e.pipeline;k(t.id).then((function(e){})).finally((function(){return G(!1)}))}),1e3),ge=Object(v.c)((function(e){G(!0);var t=e.pipeline;o(t.id).then((function(e){0===e.code&&(2===e.data.state?b.default.info("当前流水线正在在运行！",.5,(function(){return G(!1)})):I({pipelineId:t.id}).then((function(e){0===e.code&&_e(e.data)})).finally((function(){return G(!1)})))}))}),1e3),Ee=Object(v.c)((function(e){G(!0);var t=e.pipeline,r=e.instanceId;o(t.id).then((function(e){0===e.code&&(2===e.data.state?b.default.info("当前流水线正在在运行！",.5,(function(){return G(!1)})):C({pipelineId:t.id,instanceId:r}).then((function(e){0===e.code&&_e(e.data)})).finally((function(){return G(!1)})))}))}),1e3),Oe=[{title:"名称",dataIndex:"findNumber",key:"findNumber",width:"22%",ellipsis:!0,render:function(e,t){return N.a.createElement("span",{className:"history-table-name",onClick:function(){return _e(t)},__source:{fileName:Q,lineNumber:254,columnNumber:21}},M&&N.a.createElement("span",{className:"history-table-pipeline",__source:{fileName:Q,lineNumber:257,columnNumber:29}},t.pipeline&&t.pipeline.name),N.a.createElement("span",{className:"history-table-findNumber",__source:{fileName:Q,lineNumber:259,columnNumber:25}}," # ",e))}},{title:"状态",dataIndex:"runStatus",key:"runStatus",width:"10%",ellipsis:!0,render:function(e,t){return N.a.createElement(f.default,{title:Object(X.c)(t.runStatus),__source:{fileName:Q,lineNumber:271,columnNumber:17}},Object(X.b)(t.runStatus))}},{title:"触发信息",dataIndex:"runWay",key:"runWay",width:"23%",ellipsis:!0,render:function(e,t){var r,n;return N.a.createElement("div",{className:"history-table-runWay",__source:{fileName:Q,lineNumber:283,columnNumber:17}},1===e&&N.a.createElement(N.a.Fragment,null,N.a.createElement(E.a,{userInfo:null==t?void 0:t.user,__source:{fileName:Q,lineNumber:287,columnNumber:29}}),N.a.createElement("div",{className:"runWay-user",__source:{fileName:Q,lineNumber:288,columnNumber:29}},(null==t||null===(r=t.user)||void 0===r?void 0:r.nickname)||"--","手动触发")),2===e&&N.a.createElement(N.a.Fragment,null,N.a.createElement("img",{src:J,alt:"trigger",style:{width:22,height:22},__source:{fileName:Q,lineNumber:294,columnNumber:33}}),N.a.createElement("div",{className:"runWay-user",__source:{fileName:Q,lineNumber:295,columnNumber:33}},"定时触发")),3===e&&N.a.createElement(N.a.Fragment,null,N.a.createElement(E.a,{userInfo:null==t?void 0:t.user,__source:{fileName:Q,lineNumber:301,columnNumber:29}}),N.a.createElement("div",{className:"runWay-user",__source:{fileName:Q,lineNumber:302,columnNumber:29}},(null==t||null===(n=t.user)||void 0===n?void 0:n.nickname)||"--","回滚触发")),4===e&&N.a.createElement(N.a.Fragment,null,N.a.createElement("img",{src:J,alt:"trigger",style:{width:22,height:22},__source:{fileName:Q,lineNumber:308,columnNumber:29}}),N.a.createElement("div",{className:"runWay-user",__source:{fileName:Q,lineNumber:309,columnNumber:29}},"WebHook触发")))}},{title:"开始",dataIndex:"createTime",key:"createTime",width:"20%",ellipsis:!0},{title:"耗时",dataIndex:"runTimeDate",key:"runTimeDate",width:"15%",ellipsis:!0},{title:"操作",dataIndex:"action",key:"action",width:"10%",ellipsis:!0,render:function(e,r){var n=r.exec,a=r.runStatus;if(!n)return N.a.createElement(f.default,{title:"当前没有运行权限，请联系管理员分配",__source:{fileName:Q,lineNumber:339,columnNumber:25}},N.a.createElement("span",{className:"history-table-action-ban",__source:{fileName:Q,lineNumber:340,columnNumber:29}},N.a.createElement(p.a,{__source:{fileName:Q,lineNumber:341,columnNumber:33}})));switch(a){case"run":return N.a.createElement(f.default,{title:"终止",__source:{fileName:Q,lineNumber:349,columnNumber:29}},N.a.createElement("span",{onClick:function(){return ve(r)},className:"history-table-action",__source:{fileName:Q,lineNumber:350,columnNumber:33}},N.a.createElement(_.a,{__source:{fileName:Q,lineNumber:354,columnNumber:37}})));default:return N.a.createElement(i.default,{size:"middle",__source:{fileName:Q,lineNumber:360,columnNumber:29}},M?N.a.createElement(N.a.Fragment,null,N.a.createElement(s.a,{code:"pipeline_history_run",__source:{fileName:Q,lineNumber:364,columnNumber:45}},N.a.createElement(f.default,{title:"运行",__source:{fileName:Q,lineNumber:365,columnNumber:49}},N.a.createElement("span",{onClick:function(){return ge(r)},className:"history-table-action",__source:{fileName:Q,lineNumber:366,columnNumber:53}},N.a.createElement(p.a,{__source:{fileName:Q,lineNumber:370,columnNumber:57}})))),N.a.createElement(s.a,{code:"pipeline_history_rollback",__source:{fileName:Q,lineNumber:374,columnNumber:45}},N.a.createElement(f.default,{title:"回滚",__source:{fileName:Q,lineNumber:375,columnNumber:49}},N.a.createElement("span",{onClick:function(){return Ee(r)},className:"history-table-action",__source:{fileName:Q,lineNumber:376,columnNumber:53}},N.a.createElement(y.a,{__source:{fileName:Q,lineNumber:380,columnNumber:57}})))),N.a.createElement(s.a,{code:"pipeline_history_delete",__source:{fileName:Q,lineNumber:384,columnNumber:45}},N.a.createElement(w.a,{del:function(){return he(r)},isMore:!0,__source:{fileName:Q,lineNumber:385,columnNumber:49}}))):N.a.createElement(N.a.Fragment,null,N.a.createElement(c.a,{domainId:t.params.id,code:"pip_history_run",__source:{fileName:Q,lineNumber:393,columnNumber:45}},N.a.createElement(f.default,{title:"运行",__source:{fileName:Q,lineNumber:394,columnNumber:49}},N.a.createElement("span",{onClick:function(){return ge(r)},className:"history-table-action",__source:{fileName:Q,lineNumber:395,columnNumber:53}},N.a.createElement(p.a,{__source:{fileName:Q,lineNumber:399,columnNumber:57}})))),N.a.createElement(c.a,{domainId:t.params.id,code:"pip_history_rollback",__source:{fileName:Q,lineNumber:403,columnNumber:45}},N.a.createElement(f.default,{title:"回滚",__source:{fileName:Q,lineNumber:404,columnNumber:49}},N.a.createElement("span",{onClick:function(){return Ee(r)},className:"history-table-action",__source:{fileName:Q,lineNumber:405,columnNumber:53}},N.a.createElement(y.a,{__source:{fileName:Q,lineNumber:409,columnNumber:57}})))),N.a.createElement(c.a,{domainId:t.params.id,code:"pip_history_delete",__source:{fileName:Q,lineNumber:413,columnNumber:45}},N.a.createElement(w.a,{del:function(){return he(r)},isMore:!0,__source:{fileName:Q,lineNumber:414,columnNumber:49}}))))}}}],je=function(){ae(!1),z(null),Ne()};return N.a.createElement(n.default,{className:"history",__source:{fileName:Q,lineNumber:438,columnNumber:9}},N.a.createElement(a.default,{xs:{span:"24"},sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"20",offset:"2"},xxl:{span:"18",offset:"3"},__source:{fileName:Q,lineNumber:439,columnNumber:13}},N.a.createElement("div",{className:"arbess-home-limited",__source:{fileName:Q,lineNumber:447,columnNumber:17}},N.a.createElement(O.a,{crumbs:[{title:"历史"}],__source:{fileName:Q,lineNumber:448,columnNumber:21}}),N.a.createElement(B,Z({},e,{pageParam:le,requestParam:ie,setRequestParam:oe,historyCount:me,activeTab:be,setActiveTab:de,__source:{fileName:Q,lineNumber:453,columnNumber:21}})),N.a.createElement(l.default,{spinning:Y,__source:{fileName:Q,lineNumber:462,columnNumber:21}},N.a.createElement("div",{className:"history-table",__source:{fileName:Q,lineNumber:463,columnNumber:25}},N.a.createElement(u.default,{bordered:!1,columns:Oe,dataSource:L,rowKey:function(e){return e.instanceId},pagination:!1,locale:{emptyText:N.a.createElement(g.a,{__source:{fileName:Q,lineNumber:470,columnNumber:53}})},__source:{fileName:Q,lineNumber:464,columnNumber:29}}),N.a.createElement(j.a,{currentPage:W.currentPage,changPage:ye,page:W,__source:{fileName:Q,lineNumber:472,columnNumber:29}})))),N.a.createElement(P.a,{width:"75%",visible:re,onClose:je,__source:{fileName:Q,lineNumber:480,columnNumber:17}},N.a.createElement(q.a,{back:je,historyType:"drawer",historyItem:F,setHistoryItem:z,__source:{fileName:Q,lineNumber:485,columnNumber:21}}))))}))},401:function(e,t,r){"use strict";function n(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function a(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function l(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return a(r.overflowY,t)||a(r.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function u(e,t,r,n,a,l,u,i){return l<e&&u>t||l>e&&u<t?0:l<=e&&i<=r||u>=t&&i>=r?l-e-n:u>t&&i<r||l<e&&i>r?u-t+a:0}var i=function(e,t){var r=window,a=t.scrollMode,i=t.block,o=t.inline,c=t.boundary,m=t.skipOverflowHiddenElements,s="function"==typeof c?c:function(e){return e!==c};if(!n(e))throw new TypeError("Invalid target");for(var f,b,d=document.scrollingElement||document.documentElement,N=[],p=e;n(p)&&s(p);){if((p=null==(b=(f=p).parentElement)?f.getRootNode().host||null:b)===d){N.push(p);break}null!=p&&p===document.body&&l(p)&&!l(document.documentElement)||null!=p&&l(p,m)&&N.push(p)}for(var _=r.visualViewport?r.visualViewport.width:innerWidth,y=r.visualViewport?r.visualViewport.height:innerHeight,h=window.scrollX||pageXOffset,v=window.scrollY||pageYOffset,g=e.getBoundingClientRect(),E=g.height,O=g.width,j=g.top,w=g.right,P=g.bottom,S=g.left,I="start"===i||"nearest"===i?j:"end"===i?P:j+E/2,k="center"===o?S+O/2:"end"===o?w:S,C=[],x=0;x<N.length;x++){var T=N[x],H=T.getBoundingClientRect(),W=H.height,A=H.width,L=H.top,U=H.right,D=H.bottom,M=H.left;if("if-needed"===a&&j>=0&&S>=0&&P<=y&&w<=_&&j>=L&&P<=D&&S>=M&&w<=U)return C;var R=getComputedStyle(T),F=parseInt(R.borderLeftWidth,10),z=parseInt(R.borderTopWidth,10),V=parseInt(R.borderRightWidth,10),Y=parseInt(R.borderBottomWidth,10),B=0,q=0,X="offsetWidth"in T?T.offsetWidth-T.clientWidth-F-V:0,$="offsetHeight"in T?T.offsetHeight-T.clientHeight-z-Y:0,J="offsetWidth"in T?0===T.offsetWidth?0:A/T.offsetWidth:0,K="offsetHeight"in T?0===T.offsetHeight?0:W/T.offsetHeight:0;if(d===T)B="start"===i?I:"end"===i?I-y:"nearest"===i?u(v,v+y,y,z,Y,v+I,v+I+E,E):I-y/2,q="start"===o?k:"center"===o?k-_/2:"end"===o?k-_:u(h,h+_,_,F,V,h+k,h+k+O,O),B=Math.max(0,B+v),q=Math.max(0,q+h);else{B="start"===i?I-L-z:"end"===i?I-D+Y+$:"nearest"===i?u(L,D,W,z,Y+$,I,I+E,E):I-(L+W/2)+$/2,q="start"===o?k-M-F:"center"===o?k-(M+A/2)+X/2:"end"===o?k-U+V+X:u(M,U,A,F,V+X,k,k+O,O);var G=T.scrollLeft,Q=T.scrollTop;I+=Q-(B=Math.max(0,Math.min(Q+B/K,T.scrollHeight-W/K+$))),k+=G-(q=Math.max(0,Math.min(G+q/J,T.scrollWidth-A/J+X)))}C.push({el:T,top:B,left:q})}return C};function o(e){return e===Object(e)&&0!==Object.keys(e).length}t.a=function(e,t){var r=e.isConnected||e.ownerDocument.documentElement.contains(e);if(o(t)&&"function"==typeof t.behavior)return t.behavior(r?i(e,t):[]);if(r){var n=function(e){return!1===e?{block:"end",inline:"nearest"}:o(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var r="scrollBehavior"in document.body.style;e.forEach((function(e){var n=e.el,a=e.top,l=e.left;n.scroll&&r?n.scroll({top:a,left:l,behavior:t}):(n.scrollTop=a,n.scrollLeft=l)}))}(i(e,n),n.behavior)}}},646:function(e,t,r){"use strict";r.d(t,"f",(function(){return u})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return f})),r.d(t,"g",(function(){return b})),r.d(t,"e",(function(){return d}));r(155);var n=r(44),a=r(117),l=r.n(a),u=(l()().format("YYYY-MM-DD HH:mm:ss"),l()().format("HH:mm"),function(e){for(var t=window.location.search.substring(1).split("&"),r=0;r<t.length;r++){var n=t[r].split("=");if(n[0]===e)return n[1]}return!1}),i=function(e){return{pattern:/^(?=.*\S).+$/,message:"请输入有效内容"}},o=function(e,t,r){return e>=r*t?r:e<=(r-1)*t+1?1===r?1:r-1:r};function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=0;return function(){for(var n=this,a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];r&&clearTimeout(r),r=setTimeout((function(){return e.apply(n,l)}),t)}}function m(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=!1,a=function(){return setTimeout((function(){n=!1,t=null}),r)};return function(){if(t||n)n=!0;else{for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];e.apply(this,l)}t&&clearTimeout(t),t=a()}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r?m(e,t):c(e,t)}var f=function(e){var t=document.createElement("input");document.body.appendChild(t),t.setAttribute("value",e),t.select(),document.execCommand("Copy"),n.default.success("复制成功"),t.remove()};function b(e){if(!e||e.length<=3)return e;var t=e.slice(0,2),r=e.slice(-1);return"".concat(t,"******").concat(r)}function d(e){if(e<1e3)return e.toString();if(e<1e4){var t=Math.floor(e/1e3);return"".concat(t,"k+")}var r=Math.floor(e/1e4);return"".concat(r,"w+")}},668:function(e,t,r){"use strict";t.a=r.p+"images/pie_more.svg"},670:function(e,t,r){"use strict";r(279);var n=r(130),a=(r(402),r(278)),l=(r(157),r(48)),u=(r(280),r(180)),i=r.n(u),o=(r(281),r(181)),c=r.n(o),m=r(0),s=r.n(m),f=r(188),b=r(668),d="/Users/gaomengyuan/tiklab/tiklab-arbess-ui/src/common/component/list/ListAction.js";t.a=function(e){var t=e.edit,r=e.del,u=e.isMore,o=void 0!==u&&u,m=e.code,N=e.type,p=void 0===N?"system":N,_=e.domainId,y="system"===p?c.a:i.a;return s.a.createElement("span",{className:"arbess-listAction",__source:{fileName:d,lineNumber:23,columnNumber:9}},t&&s.a.createElement(y,{code:null==m?void 0:m.editCode,domainId:_,__source:{fileName:d,lineNumber:25,columnNumber:19}},s.a.createElement(l.default,{title:"修改",__source:{fileName:d,lineNumber:26,columnNumber:23}},s.a.createElement("span",{onClick:t,style:{cursor:"pointer",marginRight:15},__source:{fileName:d,lineNumber:27,columnNumber:25}},s.a.createElement(f.default,{style:{fontSize:16},__source:{fileName:d,lineNumber:28,columnNumber:29}})))),o&&s.a.createElement(n.default,{overlay:s.a.createElement("div",{className:"arbess-dropdown-more",__source:{fileName:d,lineNumber:37,columnNumber:25}},e.children,"function"==typeof r&&s.a.createElement("div",{className:"dropdown-more-item",onClick:function(){a.default.confirm({title:"确定删除吗？",content:s.a.createElement("span",{style:{color:"#f81111"},__source:{fileName:d,lineNumber:46,columnNumber:54}},"删除后无法恢复！"),okText:"确认",cancelText:"取消",onOk:function(){r()},onCancel:function(){}})},__source:{fileName:d,lineNumber:41,columnNumber:33}},"删除")),trigger:["click"],placement:"bottomRight",__source:{fileName:d,lineNumber:35,columnNumber:17}},s.a.createElement("span",{__source:{fileName:d,lineNumber:63,columnNumber:21}},s.a.createElement(y,{code:null==m?void 0:m.delCode,domainId:_,__source:{fileName:d,lineNumber:64,columnNumber:25}},s.a.createElement(l.default,{title:"更多",__source:{fileName:d,lineNumber:65,columnNumber:29}},s.a.createElement("span",{className:"arbess-listAction-more",__source:{fileName:d,lineNumber:66,columnNumber:33}},s.a.createElement("img",{src:b.a,width:18,alt:"更多",__source:{fileName:d,lineNumber:67,columnNumber:37}})))))))}},675:function(e,t,r){var n={"./es":655,"./es-do":656,"./es-do.js":656,"./es-mx":657,"./es-mx.js":657,"./es-us":658,"./es-us.js":658,"./es.js":655,"./zh-cn":659,"./zh-cn.js":659};function a(e){var t=l(e);return r(t)}function l(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=l,e.exports=a,a.id=675},813:function(e,t,r){"use strict";var n=r(0),a=r.n(n),l="/Users/gaomengyuan/tiklab/tiklab-arbess-ui/src/common/component/tabs/Tabs.js";t.a=function(e){var t=e.tabLis,r=e.type,n=e.onClick;return a.a.createElement("div",{className:"arbess-tabs",__source:{fileName:l,lineNumber:16,columnNumber:9}},t.map((function(e){return a.a.createElement("div",{key:e.id,className:"arbess-tab ".concat(r===e.id?"arbess-active-tab":""),onClick:r===e.id?void 0:function(){return n(e)},__source:{fileName:l,lineNumber:19,columnNumber:21}},e.title)})))}},944:function(e,t,r){"use strict";t.a=r.p+"images/pip_screen.svg"}}]);