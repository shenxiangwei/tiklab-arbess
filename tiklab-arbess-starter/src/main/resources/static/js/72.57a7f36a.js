(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{1425:function(e,n,t){"use strict";t.r(n);t(593);var r=t(595),i=(t(594),t(596)),a=(t(179),t(102)),o=(t(280),t(180)),c=t.n(o),u=(t(402),t(278)),l=t(0),s=t.n(l),f=t(188),m=t(363),p=t(189),b=t(123),d=t(95),y=t(39),v=t(982),N=t(1122),h=t(663),g=t(115),w=t(737),_="/Users/gaomengyuan/tiklab/tiklab-arbess-ui/src/pipeline/setting/basicInfo/BasicInfo.js";function O(){return(O=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}function I(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a,o,c=[],u=!0,l=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=a.call(t)).done)&&(c.push(r.value),c.length!==n);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw i}}return c}}(e,n)||function(e,n){if(e){if("string"==typeof e)return E(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?E(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}n.default=Object(y.inject)("pipelineStore")(Object(y.observer)((function(e){var n=e.pipelineStore,t=n.pipeline,o=n.setPipeline,y=w.a.clean,E=I(Object(l.useState)([]),2),j=E[0],k=E[1],S=I(Object(l.useState)(!1),2),P=S[0],x=S[1],z=I(Object(l.useState)(!1),2),D=z[0],A=z[1],R=function(e){return j.some((function(n){return n===e}))},L=function(e){R(e)?k(j.filter((function(n){return n!==e}))):k(j.concat(e))},C=[{key:"info",title:"流水线信息",desc:"更新流水线信息",icon:s.a.createElement(f.default,{__source:{fileName:_,lineNumber:88,columnNumber:19}}),enCode:"pipeline_update",content:s.a.createElement("div",{className:"bottom-rename",__source:{fileName:_,lineNumber:91,columnNumber:17}},s.a.createElement(v.a,O({},e,{set:!0,pipeline:t,setPipeline:o,onClick:function(){return L("info")},__source:{fileName:_,lineNumber:92,columnNumber:21}})))},{key:"clear",title:"流水线清理",desc:"清理流水线缓存",icon:s.a.createElement(m.a,{__source:{fileName:_,lineNumber:106,columnNumber:19}}),content:s.a.createElement("div",{className:"bottom-clear",__source:{fileName:_,lineNumber:108,columnNumber:17}},s.a.createElement("div",{style:{color:"#ff0000",paddingBottom:5,fontSize:13},__source:{fileName:_,lineNumber:109,columnNumber:21}},"当前操作会清理流水线的缓存，包括已拉取的源码、依赖等，已执行的历史制品不会被清除！"),s.a.createElement(g.a,{onClick:function(){return L("clear")},title:"取消",isMar:!0,__source:{fileName:_,lineNumber:112,columnNumber:21}}),s.a.createElement(c.a,{code:"pip_setting_clean",domainId:t&&t.id,__source:{fileName:_,lineNumber:117,columnNumber:21}},s.a.createElement(g.a,{onClick:function(){u.default.confirm({title:"确定清理吗？",content:s.a.createElement("span",{style:{color:"#f81111"},__source:{fileName:_,lineNumber:69,columnNumber:22}},"当前操作会清理流水线的缓存，包括已拉取的源码、依赖等，已执行的历史制品不会被清除！"),okText:"确认",cancelText:"取消",onOk:function(){A(!0),y(t.id).finally((function(){A(!1)}))},onCancel:function(){}})},type:"dangerous",title:"清理",__source:{fileName:_,lineNumber:118,columnNumber:25}})))},{key:"delete",title:"流水线删除",desc:"删除流水线",icon:s.a.createElement(p.default,{__source:{fileName:_,lineNumber:131,columnNumber:19}}),enCode:"pipeline_delete",content:s.a.createElement("div",{className:"bottom-delete",__source:{fileName:_,lineNumber:134,columnNumber:17}},s.a.createElement("div",{style:{color:"#ff0000",paddingBottom:5,fontSize:13},__source:{fileName:_,lineNumber:135,columnNumber:21}},"此操作无法恢复！请慎重操作！"),s.a.createElement(g.a,{onClick:function(){return L("delete")},title:"取消",isMar:!0,__source:{fileName:_,lineNumber:138,columnNumber:21}}),s.a.createElement(c.a,{code:"pip_setting_delete",domainId:t&&t.id,__source:{fileName:_,lineNumber:143,columnNumber:21}},s.a.createElement(g.a,{onClick:function(){return x(!0)},type:"dangerous",title:"删除",__source:{fileName:_,lineNumber:144,columnNumber:25}})))}];return s.a.createElement(r.default,{className:"pipelineReDel",__source:{fileName:_,lineNumber:156,columnNumber:9}},s.a.createElement(i.default,{xs:{span:"24"},sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"16",offset:"4"},xxl:{span:"14",offset:"5"},__source:{fileName:_,lineNumber:157,columnNumber:13}},s.a.createElement("div",{className:"arbess-home-limited",__source:{fileName:_,lineNumber:165,columnNumber:17}},s.a.createElement("div",{className:"pipelineReDel-up",__source:{fileName:_,lineNumber:166,columnNumber:21}},s.a.createElement(h.a,{crumbs:[{title:"流水线信息"}],__source:{fileName:_,lineNumber:167,columnNumber:25}})),s.a.createElement("div",{className:"pipelineReDel-content",__source:{fileName:_,lineNumber:173,columnNumber:21}},s.a.createElement(a.default,{spinning:D,__source:{fileName:_,lineNumber:174,columnNumber:25}},s.a.createElement("div",{className:"pipelineReDel-ul",__source:{fileName:_,lineNumber:175,columnNumber:29}},C.map((function(e){return s.a.createElement("div",{key:e.key,className:"pipelineReDel-li",__source:{fileName:_,lineNumber:178,columnNumber:41}},s.a.createElement("div",{className:"pipelineReDel-li-top ".concat(R(e.key)?"pipelineReDel-li-select":"pipelineReDel-li-unSelect"),onClick:function(){return L(e.key)},__source:{fileName:_,lineNumber:179,columnNumber:45}},s.a.createElement("div",{className:"pipelineReDel-li-icon",__source:{fileName:_,lineNumber:182,columnNumber:49}},e.icon),s.a.createElement("div",{className:"pipelineReDel-li-center",__source:{fileName:_,lineNumber:183,columnNumber:49}},s.a.createElement("div",{className:"pipelineReDel-li-title",__source:{fileName:_,lineNumber:184,columnNumber:53}},e.title),!R(e.key)&&s.a.createElement("div",{className:"pipelineReDel-li-desc",__source:{fileName:_,lineNumber:187,columnNumber:57}},e.desc)),s.a.createElement("div",{className:"pipelineReDel-li-down",__source:{fileName:_,lineNumber:190,columnNumber:49}},R(e.key)?s.a.createElement(b.a,{__source:{fileName:_,lineNumber:191,columnNumber:81}}):s.a.createElement(d.default,{__source:{fileName:_,lineNumber:191,columnNumber:98}}))),s.a.createElement("div",{className:"".concat(R(e.key)?"pipelineReDel-li-bottom":"pipelineReDel-li-none"),__source:{fileName:_,lineNumber:194,columnNumber:45}},R(e.key)&&e.content))})))))),s.a.createElement(N.a,O({},e,{pipeline:t,delVisible:P,setDelVisible:x,__source:{fileName:_,lineNumber:204,columnNumber:17}}))))})))},737:function(e,n,t){"use strict";t(155);var r,i,a,o,c,u,l,s,f,m,p,b,d,y,v,N,h,g,w,_=t(44),O=t(12),I=t(9);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function a(t,r,i,a){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return k(l,"_invoke",function(t,r,i){var a,c,u,l=0,s=i||[],f=!1,m={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(n,t){return a=n,c=0,u=e,m.n=t,o}};function p(t,r){for(c=t,u=r,n=0;!f&&l&&!i&&n<s.length;n++){var i,a=s[n],p=m.p,b=a[2];t>3?(i=b===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=p&&((i=t<2&&p<a[1])?(c=0,m.v=r,m.n=a[1]):p<b&&(i=t<3||a[0]>r||r>b)&&(a[4]=t,a[5]=r,m.n=b,c=0))}if(i||t>1)return o;throw f=!0,r}return function(i,s,b){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,b),c=s,u=b;(n=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(m.n=-1),p(c,u)):m.n=u:m.v=u);try{if(l=2,a){if(c||(i="next"),n=a[i]){if(!(n=n.call(a,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,c<2&&(c=0)}else 1===c&&(n=a.return)&&n.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+i+"' method"),c=1);a=e}else if((n=(f=m.n<0)?u:t.call(r,m))!==o)break}catch(n){a=e,c=1,u=n}finally{l=1}}return{value:n,done:f}}}(t,i,a),!0),l}var o={};function c(){}function u(){}function l(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(k(n={},r,(function(){return this})),n),f=l.prototype=c.prototype=Object.create(s);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,k(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,k(f,"constructor",l),k(l,"constructor",u),u.displayName="GeneratorFunction",k(l,i,"GeneratorFunction"),k(f),k(f,i,"Generator"),k(f,r,(function(){return this})),k(f,"toString",(function(){return"[object Generator]"})),(j=function(){return{w:a,m:m}})()}function k(e,n,t,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}(k=function(e,n,t,r){function a(n,t){k(e,n,(function(e){return this._invoke(n,t,e)}))}n?i?i(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))})(e,n,t,r)}function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){L(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function x(e,n,t,r,i,a,o){try{var c=e[a](o),u=c.value}catch(e){return void t(e)}c.done?n(u):Promise.resolve(u).then(r,i)}function z(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){x(a,r,i,o,c,"next",e)}function c(e){x(a,r,i,o,c,"throw",e)}o(void 0)}))}}function D(e,n,t,r){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(r):void 0})}function A(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function R(e,n,t){return n&&A(e.prototype,n),t&&A(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function L(e,n,t){return(n=C(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function C(e){var n=function(e,n){if("object"!=E(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==E(n)?n:n+""}function T(e,n,t,r,i){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,r){return r(e,n,t)||t}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,n,a),null):a}var F=new(i=T((r=R((function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),D(this,"historyList",i,this),D(this,"page",a,this),D(this,"setHistoryList",o,this),D(this,"rollBackStart",c,this),D(this,"execStart",u,this),D(this,"execStop",l,this),D(this,"keepOn",s,this),D(this,"clean",f,this),D(this,"findTaskInstance",m,this),D(this,"findStageInstance",p,this),D(this,"deleteInstance",b,this),D(this,"findUserInstance",d,this),D(this,"findPipelineInstance",y,this),D(this,"findHistoryList",v,this),D(this,"findOneInstance",N,this),D(this,"findPipelineInstanceCount",h,this),D(this,"findAllInstanceLogs",g,this),D(this,"findAllStageInstanceLogs",w,this)}))).prototype,"historyList",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=T(r.prototype,"page",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{currentPage:1,totalRecord:0,totalPage:1}}}),o=T(r.prototype,"setHistoryList",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(n){e.historyList=n}}}),c=T(r.prototype,"rollBackStart",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=z(j().m((function e(n){var t,r;return j().w((function(e){for(;;)switch(e.n){case 0:return t=P(P({},n),{},{runWay:1,userId:Object(I.getUser)().userId}),e.n=1,I.Axios.post("/exec/rollBackStart",t);case 1:return 0!==(r=e.v).code&&_.default.error(r.msg),e.a(2,r)}}),e)})));return function(n){return e.apply(this,arguments)}}()}}),u=T(r.prototype,"execStart",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=z(j().m((function e(n){var t,r;return j().w((function(e){for(;;)switch(e.n){case 0:return t=P(P({},n),{},{runWay:1,userId:Object(I.getUser)().userId}),e.n=1,I.Axios.post("/exec/start",t);case 1:return 0!==(r=e.v).code&&_.default.error(r.msg),e.a(2,r)}}),e)})));return function(n){return e.apply(this,arguments)}}()}}),l=T(r.prototype,"execStop",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=z(j().m((function e(n){var t;return j().w((function(e){for(;;)switch(e.n){case 0:return(t=new FormData).append("pipelineId",n),e.n=1,I.Axios.post("/exec/stop",t);case 1:return e.a(2,e.v)}}),e)})));return function(n){return e.apply(this,arguments)}}()}}),s=T(r.prototype,"keepOn",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=z(j().m((function e(n){var t;return j().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,I.Axios.post("/exec/keepOn",n);case 1:return 0!==(t=e.v).code&&_.default.error(t.msg),e.a(2,t)}}),e)})));return function(n){return e.apply(this,arguments)}}()}}),f=T(r.prototype,"clean",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=z(j().m((function e(n){var t,r;return j().w((function(e){for(;;)switch(e.n){case 0:return(t=new FormData).append("pipelineId",n),e.n=1,I.Axios.post("/exec/clean",t);case 1:return 0===(r=e.v).code?_.default.success("清理成功"):_.default.error(r.msg),e.a(2,r)}}),e)})));return function(n){return e.apply(this,arguments)}}()}}),m=T(r.prototype,"findTaskInstance",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=z(j().m((function e(n){var t;return j().w((function(e){for(;;)switch(e.n){case 0:return(t=new FormData).append("instanceId",n),e.n=1,I.Axios.post("/taskInstance/findTaskInstance",t);case 1:return e.a(2,e.v)}}),e)})));return function(n){return e.apply(this,arguments)}}()}}),p=T(r.prototype,"findStageInstance",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=z(j().m((function e(n){var t;return j().w((function(e){for(;;)switch(e.n){case 0:return(t=new FormData).append("instanceId",n),e.n=1,I.Axios.post("/stageInstance/findStageInstance",t);case 1:return e.a(2,e.v)}}),e)})));return function(n){return e.apply(this,arguments)}}()}}),b=T(r.prototype,"deleteInstance",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=z(j().m((function e(n){var t,r;return j().w((function(e){for(;;)switch(e.n){case 0:return(t=new FormData).append("instanceId",n),e.n=1,I.Axios.post("/instance/deleteInstance",t);case 1:return 0===(r=e.v).code&&_.default.success("删除成功"),e.a(2,r)}}),e)})));return function(n){return e.apply(this,arguments)}}()}}),d=T(r.prototype,"findUserInstance",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var n=z(j().m((function n(t){var r;return j().w((function(n){for(;;)switch(n.n){case 0:return n.n=1,I.Axios.post("/instance/findUserInstance",t);case 1:return r=n.v,e.findHistoryList(r),n.a(2,r)}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),y=T(r.prototype,"findPipelineInstance",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var n=z(j().m((function n(t){var r;return j().w((function(n){for(;;)switch(n.n){case 0:return n.n=1,I.Axios.post("/instance/findPipelineInstance",t);case 1:return r=n.v,e.findHistoryList(r),n.a(2,r)}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),v=T(r.prototype,"findHistoryList",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(n){0===n.code&&n.data?(e.historyList=n.data.dataList,e.page={currentPage:n.data.currentPage,totalPage:n.data.totalPage,totalRecord:n.data.totalRecord}):(e.historyList=[],e.page={currentPage:1,totalPage:1,totalRecord:0})}}}),N=T(r.prototype,"findOneInstance",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=z(j().m((function e(n){var t;return j().w((function(e){for(;;)switch(e.n){case 0:return(t=new FormData).append("instanceId",n),e.n=1,I.Axios.post("/instance/findOneInstance",t);case 1:return e.a(2,e.v)}}),e)})));return function(n){return e.apply(this,arguments)}}()}}),h=T(r.prototype,"findPipelineInstanceCount",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=z(j().m((function e(n){return j().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,I.Axios.post("/instance/findPipelineInstanceCount",n);case 1:return e.a(2,e.v)}}),e)})));return function(n){return e.apply(this,arguments)}}()}}),g=T(r.prototype,"findAllInstanceLogs",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=z(j().m((function e(n){var t;return j().w((function(e){for(;;)switch(e.n){case 0:return(t=new FormData).append("instanceId",n),e.n=1,I.Axios.post("/taskInstance/findAllInstanceLogs",t);case 1:return e.a(2,e.v)}}),e)})));return function(n){return e.apply(this,arguments)}}()}}),w=T(r.prototype,"findAllStageInstanceLogs",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=z(j().m((function e(n){var t;return j().w((function(e){for(;;)switch(e.n){case 0:return(t=new FormData).append("instanceId",n),e.n=1,I.Axios.post("/stageInstance/findAllStageInstanceLogs",t);case 1:return e.a(2,e.v)}}),e)})));return function(n){return e.apply(this,arguments)}}()}}),r);n.a=F}}]);