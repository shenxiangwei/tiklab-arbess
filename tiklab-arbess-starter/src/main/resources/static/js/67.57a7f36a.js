(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{1417:function(e,n,r){"use strict";r.r(n);r(593);var t,a,i,u,o,c,l,m=r(595),s=(r(594),r(596)),f=(r(179),r(102)),b=(r(410),r(186)),N=(r(155),r(44)),d=r(0),v=r.n(d),p=r(9),_=r(663),y=r(814),h=r(12);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,r="function"==typeof Symbol?Symbol:{},t=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function i(r,t,a,i){var c=t&&t.prototype instanceof o?t:o,l=Object.create(c.prototype);return g(l,"_invoke",function(r,t,a){var i,o,c,l=0,m=a||[],s=!1,f={p:0,n:0,v:e,a:b,f:b.bind(e,4),d:function(n,r){return i=n,o=0,c=e,f.n=r,u}};function b(r,t){for(o=r,c=t,n=0;!s&&l&&!a&&n<m.length;n++){var a,i=m[n],b=f.p,N=i[2];r>3?(a=N===t)&&(c=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=e):i[0]<=b&&((a=r<2&&b<i[1])?(o=0,f.v=t,f.n=i[1]):b<N&&(a=r<3||i[0]>t||t>N)&&(i[4]=r,i[5]=t,f.n=N,o=0))}if(a||r>1)return u;throw s=!0,t}return function(a,m,N){if(l>1)throw TypeError("Generator is already running");for(s&&1===m&&b(m,N),o=m,c=N;(n=o<2?e:c)||!s;){i||(o?o<3?(o>1&&(f.n=-1),b(o,c)):f.n=c:f.v=c);try{if(l=2,i){if(o||(a="next"),n=i[a]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,o<2&&(o=0)}else 1===o&&(n=i.return)&&n.call(i),o<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),o=1);i=e}else if((n=(s=f.n<0)?c:r.call(t,f))!==u)break}catch(n){i=e,o=1,c=n}finally{l=1}}return{value:n,done:s}}}(r,a,i),!0),l}var u={};function o(){}function c(){}function l(){}n=Object.getPrototypeOf;var m=[][t]?n(n([][t]())):(g(n={},t,(function(){return this})),n),s=l.prototype=o.prototype=Object.create(m);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,g(e,a,"GeneratorFunction")),e.prototype=Object.create(s),e}return c.prototype=l,g(s,"constructor",l),g(l,"constructor",c),c.displayName="GeneratorFunction",g(l,a,"GeneratorFunction"),g(s),g(s,a,"Generator"),g(s,t,(function(){return this})),g(s,"toString",(function(){return"[object Generator]"})),(w=function(){return{w:i,m:f}})()}function g(e,n,r,t){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(g=function(e,n,r,t){function i(n,r){g(e,n,(function(e){return this._invoke(n,r,e)}))}n?a?a(e,n,{value:r,enumerable:!t,configurable:!t,writable:!t}):e[n]=r:(i("next",0),i("throw",1),i("return",2))})(e,n,r,t)}function j(e,n,r,t,a,i,u){try{var o=e[i](u),c=o.value}catch(e){return void r(e)}o.done?n(c):Promise.resolve(c).then(t,a)}function S(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var i=e.apply(n,r);function u(e){j(i,t,a,u,o,"next",e)}function o(e){j(i,t,a,u,o,"throw",e)}u(void 0)}))}}function O(e,n,r,t){r&&Object.defineProperty(e,n,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(t):void 0})}function k(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,A(t.key),t)}}function C(e,n,r){return n&&k(e.prototype,n),r&&k(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function A(e){var n=function(e,n){if("object"!=E(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,n||"default");if("object"!=E(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==E(n)?n:n+""}function P(e,n,r,t,a){var i={};return Object.keys(t).forEach((function(e){i[e]=t[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,t){return t(e,n,r)||r}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer?(Object.defineProperty(e,n,i),null):i}var R=new(a=P((t=C((function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),O(this,"findResourcesList",a,this),O(this,"findResourcesDetails",i,this),O(this,"findDiskList",u,this),O(this,"cleanDisk",o,this),O(this,"findAllCathe",c,this),O(this,"updateCathe",l,this)}))).prototype,"findResourcesList",[h.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S(w().m((function e(){var n;return w().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,p.Axios.post("/resources/findResourcesList");case 1:return n=e.v,e.a(2,n)}}),e)})))}}),i=P(t.prototype,"findResourcesDetails",[h.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=S(w().m((function e(n){var r;return w().w((function(e){for(;;)switch(e.n){case 0:return(r=new FormData).append("type",n),e.n=1,p.Axios.post("/resources/findResourcesDetails",r);case 1:return e.a(2,e.v)}}),e)})));return function(n){return e.apply(this,arguments)}}()}}),u=P(t.prototype,"findDiskList",[h.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S(w().m((function e(){return w().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,p.Axios.post("/disk/findDiskList");case 1:return e.a(2,e.v)}}),e)})))}}),o=P(t.prototype,"cleanDisk",[h.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=S(w().m((function e(n){var r,t;return w().w((function(e){for(;;)switch(e.n){case 0:return(r=new FormData).append("fileList",n.fileList),e.n=1,p.Axios.post("/disk/cleanDisk",r);case 1:return 0===(t=e.v).code?N.default.success("清理成功"):N.default.error("清理失败"),e.a(2,t)}}),e)})));return function(n){return e.apply(this,arguments)}}()}}),c=P(t.prototype,"findAllCathe",[h.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S(w().m((function e(){return w().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,p.Axios.post("/cache/findAllCathe");case 1:return e.a(2,e.v)}}),e)})))}}),l=P(t.prototype,"updateCathe",[h.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=S(w().m((function e(n){return w().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,p.Axios.post("/cache/updateCathe",n);case 1:return e.a(2,e.v)}}),e)})));return function(n){return e.apply(this,arguments)}}()}}),t),z=r(39);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x="/Users/gaomengyuan/tiklab/tiklab-arbess-ui/src/setting/resources/component/Resources.js";function D(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=L(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,n||"default");if("object"!=L(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==L(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function G(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,a,i,u,o=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(t=i.call(r)).done)&&(o.push(t.value),o.length!==n);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return T(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=Array(n);r<n;r++)t[r]=e[r];return t}n.default=Object(z.inject)("systemRoleStore")(Object(z.observer)((function(e){var n=e.systemRoleStore,r=R.findResourcesList,t=R.findAllCathe,a=R.updateCathe,i=(R.findResourcesDetails,n.systemPermissions),u=G(Object(d.useState)(!0),2),o=u[0],c=u[1],l=G(Object(d.useState)({}),2),h=l[0],E=l[1],w=G(Object(d.useState)({}),2),g=w[0],j=w[1],S=G(Object(d.useState)({}),2),O=(S[0],S[1],G(Object(d.useState)(!1),2)),k=O[0],C=O[1],A=Object(p.disableFunction)(),P=null==i?void 0:i.includes("pipeline_resource_update");Object(d.useEffect)((function(){z(),L()}),[]);var z=function(){r().then((function(e){0===e.code&&E(e.data)})).finally((function(){return c(!1)}))},L=function(){t().then((function(e){0===e.code&&j(e.data&&e.data[0])}))},T=function(e,n){A?C(!0):a(D({id:g.id},n,e.target.value)).then((function(e){0===e.code&&(N.default.success("保存成功"),L())}))},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return h?e<0?"不限":e+n:"--"};return v.a.createElement(m.default,{className:"resources",__source:{fileName:x,lineNumber:120,columnNumber:9}},v.a.createElement(y.b,{config:{title:"资源监控",desc:"监控日志和构建制品，平衡存储成本"},visible:k,setVisible:C,mode:"dialog",__source:{fileName:x,lineNumber:121,columnNumber:13}}),v.a.createElement(s.default,{sm:{span:24},xs:{span:24},md:{span:24},lg:{span:"16",offset:"4"},xl:{span:"12",offset:"6"},__source:{fileName:x,lineNumber:130,columnNumber:13}},v.a.createElement("div",{className:"arbess-home-limited",__source:{fileName:x,lineNumber:137,columnNumber:17}},v.a.createElement(_.a,{crumbs:[{title:"资源监控"}],__source:{fileName:x,lineNumber:138,columnNumber:21}}),v.a.createElement(f.default,{spinning:o,__source:{fileName:x,lineNumber:143,columnNumber:21}},v.a.createElement("div",{className:"resources-info",__source:{fileName:x,lineNumber:144,columnNumber:25}},v.a.createElement("div",{className:"resources-info-item",__source:{fileName:x,lineNumber:145,columnNumber:29}},v.a.createElement("div",{className:"resources-item-title",__source:{fileName:x,lineNumber:146,columnNumber:33}},"版本类型"),v.a.createElement("div",{className:"resources-item-total",__source:{fileName:x,lineNumber:147,columnNumber:33}},1===(null==h?void 0:h.version)?"社区版":"企业版"),1===(null==h?void 0:h.version)&&v.a.createElement("div",{className:"resources-item-allow",onClick:function(){Object(p.applySubscription)("arbess")},__source:{fileName:x,lineNumber:150,columnNumber:37}},"升级企业版")),v.a.createElement("div",{className:"resources-info-item",__source:{fileName:x,lineNumber:153,columnNumber:29}},v.a.createElement("div",{className:"resources-item-title",__source:{fileName:x,lineNumber:154,columnNumber:33}},"并发数"),v.a.createElement("div",{className:"resources-item-total",__source:{fileName:x,lineNumber:155,columnNumber:33}},v.a.createElement("span",{__source:{fileName:x,lineNumber:156,columnNumber:37}},F(null==h?void 0:h.useCcyNumber,"")),v.a.createElement("span",{className:"resources-item-separat",__source:{fileName:x,lineNumber:157,columnNumber:37}},"/"),v.a.createElement("span",{__source:{fileName:x,lineNumber:158,columnNumber:37}},F(null==h?void 0:h.ccyNumber,"")))),v.a.createElement("div",{className:"resources-info-item",__source:{fileName:x,lineNumber:161,columnNumber:29}},v.a.createElement("div",{className:"resources-item-title",__source:{fileName:x,lineNumber:162,columnNumber:33}},"构建时长"),v.a.createElement("div",{className:"resources-item-total",__source:{fileName:x,lineNumber:163,columnNumber:33}},v.a.createElement("span",{__source:{fileName:x,lineNumber:164,columnNumber:37}},F(null==h?void 0:h.useSceNumber,"分钟")),v.a.createElement("span",{className:"resources-item-separat",__source:{fileName:x,lineNumber:165,columnNumber:37}},"/"),v.a.createElement("span",{__source:{fileName:x,lineNumber:166,columnNumber:37}},F(null==h?void 0:h.sceNumber,"分钟")))),v.a.createElement("div",{className:"resources-info-item",__source:{fileName:x,lineNumber:169,columnNumber:29}},v.a.createElement("div",{className:"resources-item-title",__source:{fileName:x,lineNumber:170,columnNumber:33}},"磁盘空间"),v.a.createElement("div",{className:"resources-item-total",__source:{fileName:x,lineNumber:171,columnNumber:33}},v.a.createElement("div",{__source:{fileName:x,lineNumber:172,columnNumber:37}},v.a.createElement("span",{__source:{fileName:x,lineNumber:173,columnNumber:41}},F(null==h?void 0:h.useCacheNumber,"G")),v.a.createElement("span",{className:"resources-item-separat",__source:{fileName:x,lineNumber:174,columnNumber:41}},"/"),v.a.createElement("span",{__source:{fileName:x,lineNumber:175,columnNumber:41}},F(null==h?void 0:h.cacheNumber,"G"))))),v.a.createElement("div",{className:"resources-info-item",__source:{fileName:x,lineNumber:179,columnNumber:29}},v.a.createElement("div",{className:"resources-item-title",__source:{fileName:x,lineNumber:180,columnNumber:33}},"日志保存时长"),v.a.createElement(b.a.Group,{value:null==g?void 0:g.logCache,onChange:function(e){return T(e,"logCache")},disabled:!A&&!P,__source:{fileName:x,lineNumber:181,columnNumber:33}},v.a.createElement(b.a,{value:7,__source:{fileName:x,lineNumber:186,columnNumber:37}},"7天"),v.a.createElement(b.a,{value:15,__source:{fileName:x,lineNumber:189,columnNumber:37}},"15天"),v.a.createElement(b.a,{value:30,__source:{fileName:x,lineNumber:192,columnNumber:37}},"30天"))),v.a.createElement("div",{className:"resources-info-item",__source:{fileName:x,lineNumber:197,columnNumber:29}},v.a.createElement("div",{className:"resources-item-title",__source:{fileName:x,lineNumber:198,columnNumber:33}},"制品保存时长"),v.a.createElement(b.a.Group,{value:null==g?void 0:g.artifactCache,onChange:function(e){return T(e,"artifactCache")},disabled:!A&&!P,__source:{fileName:x,lineNumber:199,columnNumber:33}},v.a.createElement(b.a,{value:7,__source:{fileName:x,lineNumber:204,columnNumber:37}},"7天"),v.a.createElement(b.a,{value:15,__source:{fileName:x,lineNumber:207,columnNumber:37}},"15天"),v.a.createElement(b.a,{value:30,__source:{fileName:x,lineNumber:210,columnNumber:37}},"30天"))))))))})))},663:function(e,n,r){"use strict";r(275);var t=r(177),a=r(0),i=r.n(a),u=r(120),o="/Users/gaomengyuan/tiklab/tiklab-arbess-ui/src/common/component/breadcrumb/BreadCrumb.js";n.a=function(e){var n=e.crumbs,r=void 0===n?[]:n,a=e.children;return i.a.createElement("div",{className:"arbess-breadcrumb",__source:{fileName:o,lineNumber:16,columnNumber:9}},i.a.createElement(t.default,{__source:{fileName:o,lineNumber:17,columnNumber:13}},r.map((function(e,n){var t=e.title,a=void 0===t?null:t,c=e.click,l=r.length-1===n;return i.a.createElement(i.a.Fragment,{key:n,__source:{fileName:o,lineNumber:23,columnNumber:29}},i.a.createElement("span",{key:n,className:c?"arbess-breadcrumb-first":"",onClick:c,__source:{fileName:o,lineNumber:24,columnNumber:33}},c&&0===n&&i.a.createElement(u.default,{style:{marginRight:8},__source:{fileName:o,lineNumber:25,columnNumber:60}}),i.a.createElement("span",{className:l?"":"arbess-breadcrumb-span",__source:{fileName:o,lineNumber:26,columnNumber:37}},a)),!l&&i.a.createElement("span",{__source:{fileName:o,lineNumber:30,columnNumber:46}}," /  "))}))),i.a.createElement("div",{__source:{fileName:o,lineNumber:36,columnNumber:13}},a))}},814:function(e,n,r){"use strict";r.d(n,"a",(function(){return o}));var t=r(0),a=r.n(t),i=r(9),u="/Users/gaomengyuan/tiklab/tiklab-arbess-ui/src/common/component/modal/EnhanceEntranceModal.js",o=function(e){var n=e.config,r=e.contentRef;return a.a.createElement("div",{className:"enhance-popup-container",ref:r,__source:{fileName:u,lineNumber:9,columnNumber:5}},a.a.createElement("div",{className:"enhance-title",__source:{fileName:u,lineNumber:10,columnNumber:9}},null==n?void 0:n.title),a.a.createElement("div",{className:"enhance-fea",__source:{fileName:u,lineNumber:11,columnNumber:9}},"企业版专属功能"),a.a.createElement("div",{className:"enhance-desc",__source:{fileName:u,lineNumber:12,columnNumber:9}},null==n?void 0:n.desc),a.a.createElement("div",{className:"enhance-button",__source:{fileName:u,lineNumber:13,columnNumber:9}},a.a.createElement("button",{className:"enhance-button-contact",onClick:function(){return window.open("https://tiklab.net/contactus")},__source:{fileName:u,lineNumber:14,columnNumber:13}},"联系客服"),a.a.createElement("button",{className:"enhance-button-update",onClick:function(){return Object(i.applySubscription)("arbess")},__source:{fileName:u,lineNumber:20,columnNumber:13}},"升级版本")))};n.b=function(e){var n=e.config,r=e.visible,c=e.setVisible,l=e.mode,m=void 0===l?"dialog":l,s=Object(t.useRef)(null);return"page"===m?Object(i.disableFunction)()?a.a.createElement("div",{className:"arbess-enhance-entrance-modal",__source:{fileName:u,lineNumber:41,columnNumber:13}},a.a.createElement("div",{className:"enhance-entrance-modal",__source:{fileName:u,lineNumber:42,columnNumber:17}},a.a.createElement("div",{className:"enhance-entrance-modal-content",__source:{fileName:u,lineNumber:43,columnNumber:21}},a.a.createElement(o,{config:n,__source:{fileName:u,lineNumber:44,columnNumber:25}})))):null:(Object(t.useEffect)((function(){if(r){var e=function(e){s.current&&!s.current.contains(e.target)&&c(!1)},n=function(e){"Escape"===e.key&&c(!1)};return window.addEventListener("mousedown",e),window.addEventListener("keydown",n),function(){window.removeEventListener("mousedown",e),window.removeEventListener("keydown",n)}}}),[r]),a.a.createElement("div",{className:"arbess-enhance-entrance-modal ".concat(r?"":"arbess-enhance-entrance-modal-hidden"),__source:{fileName:u,lineNumber:75,columnNumber:9}},a.a.createElement("div",{className:"enhance-entrance-modal",__source:{fileName:u,lineNumber:76,columnNumber:13}},a.a.createElement("div",{className:"enhance-entrance-modal-content",__source:{fileName:u,lineNumber:77,columnNumber:17}},a.a.createElement(o,{config:n,contentRef:s,__source:{fileName:u,lineNumber:78,columnNumber:21}})))))}}}]);