(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{1406:function(e,t,r){"use strict";r.r(t);r(509);var n=r(511),l=(r(510),r(512)),a=(r(253),r(167)),i=(r(544),r(541)),u=r(0),m=r.n(u),c=r(10),o=r(149),s=r(578),p=r(340),b="/Users/gaomengyuan/tiklab/tiklab-arbess-ui/src/pipeline/pipeline/components/PipelineAddMould.js",f=function(e){var t=e.templateType,r=e.setTemplateType,n=function(e){return m.a.createElement("div",{className:"li-step",__source:{fileName:b,lineNumber:76,columnNumber:13}},m.a.createElement("span",{className:"li-step-name",__source:{fileName:b,lineNumber:77,columnNumber:17}},e))};return m.a.createElement("div",{className:"pipeline-template-ul",__source:{fileName:b,lineNumber:83,columnNumber:9}},m.a.createElement("div",{className:"pipeline-template-title",__source:{fileName:b,lineNumber:84,columnNumber:13}},"流水线模板"),m.a.createElement("div",{className:"".concat(1===t?"pipeline-template-li pipeline-template-select":"pipeline-template-li"),onClick:function(){return r(1)},__source:{fileName:b,lineNumber:85,columnNumber:13}},m.a.createElement("div",{className:"li-self",__source:{fileName:b,lineNumber:88,columnNumber:17}},"自定义")),[{id:2,title:"Java",brand:"Maven",desc:"Linux",first:"Maven构建",second:"部署",type:2131},{id:4,title:"Java",brand:"Maven",desc:"Linux",zreo:"测试",first:"构建",second:"部署",type:112131},{id:6,title:"Node.js",brand:"npm",desc:"Linux",first:"构建",second:"部署",type:2231}].map((function(e){return m.a.createElement("div",{key:e.id,className:"".concat(t===e.type?"pipeline-template-li pipeline-template-select":"pipeline-template-li"),onClick:function(){return r(e.type)},__source:{fileName:b,lineNumber:93,columnNumber:25}},m.a.createElement("div",{__source:{fileName:b,lineNumber:97,columnNumber:29}},m.a.createElement("div",{className:"pipeline-template-li-header",__source:{fileName:b,lineNumber:98,columnNumber:33}},m.a.createElement("span",{className:"li-header-icon",__source:{fileName:b,lineNumber:99,columnNumber:37}},m.a.createElement(p.a,{__source:{fileName:b,lineNumber:99,columnNumber:70}})),m.a.createElement("span",{className:"li-header-name",__source:{fileName:b,lineNumber:100,columnNumber:37}},e.title,"-",e.brand),m.a.createElement("span",{__source:{fileName:b,lineNumber:101,columnNumber:37}},"部署到"),m.a.createElement("span",{className:"li-header-title",__source:{fileName:b,lineNumber:102,columnNumber:37}},e.desc),m.a.createElement("span",{__source:{fileName:b,lineNumber:103,columnNumber:37}},"环境")),m.a.createElement("div",{className:"pipeline-template-li-content",__source:{fileName:b,lineNumber:105,columnNumber:33}},e.zreo&&n(e.zreo),n(e.first),n(e.second))))})))},N=r(1090),d=r(231);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y="/Users/gaomengyuan/tiklab/tiklab-arbess-ui/src/pipeline/pipeline/components/pipelineAdd.js",v=["userList"];function E(){return(E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,l,a,i,u=[],m=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);m=!0);}catch(e){c=!0,l=e}finally{try{if(!m&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw l}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(e){var t=d.a.createPipeline,r=Object(c.getUser)(),p=j(Object(u.useState)(!1),2),b=p[0],_=p[1],O=j(Object(u.useState)(0),2),h=O[0],w=O[1],S=j(Object(u.useState)(1),2),P=S[0],k=S[1],T=j(Object(u.useState)({power:1,type:2,group:{id:"default"},env:{id:"default"},userList:[g(g({},r),{},{id:r.userId,roleType:2})]}),2),x=T[0],A=T[1],I=function(){var r=x.userList,n=g(g({},function(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}(x,v)),{},{template:P,userList:r&&r.map((function(e){return{userId:e.id,roleType:e.roleType}}))});_(!0),t(n).then((function(t){0===t.code&&e.history.push("/pipeline/".concat(t.data,"/config"))})).finally((function(){return _(!1)}))},C=m.a.createElement("div",{className:"pipeline-template",__source:{fileName:y,lineNumber:59,columnNumber:12}},m.a.createElement("div",{className:"template-base",__source:{fileName:y,lineNumber:60,columnNumber:16}},m.a.createElement("span",{__source:{fileName:y,lineNumber:61,columnNumber:20}},"流水线名称："),m.a.createElement("span",{__source:{fileName:y,lineNumber:62,columnNumber:20}},x.name)),m.a.createElement("div",{className:"template-base",__source:{fileName:y,lineNumber:68,columnNumber:16}},m.a.createElement("span",{__source:{fileName:y,lineNumber:69,columnNumber:20}},"流水线权限："),m.a.createElement("span",{__source:{fileName:y,lineNumber:70,columnNumber:20}},1===x.power?"全局":"私有")),m.a.createElement(f,{templateType:P,setTemplateType:k,__source:{fileName:y,lineNumber:72,columnNumber:16}})),L=[{title:"完善信息",content:m.a.createElement(N.a,E({},e,{set:!1,setCurrent:w,baseInfo:x,setBaseInfo:A,pipelineStore:d.a,__source:{fileName:y,lineNumber:81,columnNumber:9}}))},{title:"选择模板",content:C}];return m.a.createElement(n.default,{className:"pipeline-add",__source:{fileName:y,lineNumber:103,columnNumber:9}},m.a.createElement(l.default,{xs:{span:"24"},sm:{span:"24"},md:{span:"24"},lg:{span:"18",offset:"3"},xl:{span:"14",offset:"5"},xxl:{span:"12",offset:"6"},__source:{fileName:y,lineNumber:104,columnNumber:13}},m.a.createElement(a.default,{spinning:b,__source:{fileName:y,lineNumber:112,columnNumber:16}},m.a.createElement("div",{className:"arbess-home-limited",__source:{fileName:y,lineNumber:113,columnNumber:20}},m.a.createElement(s.a,{crumbs:[{title:"新建流水线",click:function(){return e.history.push("/pipeline")}}],__source:{fileName:y,lineNumber:114,columnNumber:24}}),m.a.createElement("div",{className:"steps-top",__source:{fileName:y,lineNumber:119,columnNumber:24}},m.a.createElement(i.a,{current:h,__source:{fileName:y,lineNumber:120,columnNumber:28}},L.map((function(e){return m.a.createElement(i.a.Step,{key:e.title,title:e.title,__source:{fileName:y,lineNumber:122,columnNumber:36}})})))),m.a.createElement("div",{className:"steps-content",__source:{fileName:y,lineNumber:126,columnNumber:24}},L[h].content),1===h&&m.a.createElement("div",{className:"steps-bottom",__source:{fileName:y,lineNumber:131,columnNumber:28}},m.a.createElement(o.a,{onClick:function(){return e.history.push("/pipeline")},title:"取消",isMar:!0,__source:{fileName:y,lineNumber:132,columnNumber:32}}),m.a.createElement(o.a,{onClick:function(){return w(0)},title:"上一步",isMar:!0,__source:{fileName:y,lineNumber:137,columnNumber:32}}),m.a.createElement(o.a,{type:"primary",onClick:function(){return I()},title:"确定",__source:{fileName:y,lineNumber:142,columnNumber:32}}))))))}}}]);